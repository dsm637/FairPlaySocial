@inherits FairPlaySocial.SharedUI.Pages.CustomBaseComponent

<LoadingIndicator IsLoading="@this.IsBusy"></LoadingIndicator>

@if (this.PostModels?.Count > 0)
{
    foreach (var singlePostModel in this.PostModels)
    {
        <div class="@ThemeConfiguration.Chats.ChatItemSection">
            <label @onclick="@( async () => await OnPostAuthorSelectedAsync(singlePostModel))"
           class="@ThemeConfiguration.Chats.ChatSender"
           style="cursor:pointer;">
                @singlePostModel.OwnerApplicationUserFullName
            </label>
            <label class="@ThemeConfiguration.Labels.DefaultCss"
           style="display:inline; float:right;">
                <strong>
                    @(singlePostModel.PostedTime.Hours > 0 ? $"{(int)singlePostModel.PostedTime.Hours}h" : $"{singlePostModel.PostedTime.Minutes}m")
                </strong>
            </label>
            <p class="@ThemeConfiguration.Chats.ChatContent">@singlePostModel.Text</p>
            <p class="@ThemeConfiguration.Chats.ChatTime"></p>
            @if (singlePostModel.Photo != null)
            {
                <img class="@ThemeConfiguration.Images.ThumbnailDefaultCss"
         src="data:@singlePostModel.Photo!.ImageType;base64, @Convert.ToBase64String(singlePostModel.Photo.ImageBytes!)" />
            }
            <div class="@ThemeConfiguration.Chats.ChatActionsBar">
                @if (singlePostModel.IsLiked == false)
                {
                    <button class="btn"
                @onclick="@( async () => await LikePostAsync(singlePostModel))">
                        <i class="bi bi-hand-thumbs-up"></i>
                    </button>
                }
                else
                {
                    <button class="btn">
                        <i class="bi bi-hand-thumbs-up-fill"></i>
                    </button>
                }
                @if (singlePostModel.IsDisliked == false)
                {
                    <button class="btn"
                @onclick="@( async () => await DislikePostAsync(singlePostModel))">
                        <i class="bi bi-hand-thumbs-down"></i>
                    </button>
                }
                else
                {
                    <button class="btn">
                        <i class="bi bi-hand-thumbs-down-fill"></i>
                    </button>
                }
                <p>@singlePostModel.LikesCount like(s)</p>
            </div>
        </div>
    }
}

@if (this.ShowPostAuthorModal && this.MySelectedAuthorFollowStatus != null &&
this.SelectedPostModel != null && this.MySelectedAuthorUserProfile != null)
{
    <CustomModal OkButtonText="OK" OnCloseButtonClicked="HidePostAuthorModal"
             ShowFooter="false">
        <Title>@this.SelectedPostModel!.OwnerApplicationUserFullName</Title>
        <Content>
            <p>
                Bio: @this.MySelectedAuthorUserProfile.Bio
            </p>
            <p>
                YouTubeNickname: @this.MySelectedAuthorUserProfile.YouTubeNickname
            </p>
            <p>
                FacebookNickname: @this.MySelectedAuthorUserProfile.FacebookNickname
            </p>
            <p>
                InstagramNickname: @this.MySelectedAuthorUserProfile.InstagramNickname
            </p>
            <p>
                TwitterNickname: @this.MySelectedAuthorUserProfile.TwitterNickname
            </p>
            <p>
                LinkedInNickname: @this.MySelectedAuthorUserProfile.LinkedInNickname
            </p>
            @if (!this.MySelectedAuthorFollowStatus!.IsFollowed)
            {
                <button type="button"
                @onclick="OnFollowSelectedAuthorAsync">
                    <i class="bi bi-star"></i>
                </button>
            }
            else
            {
                <button type="button"
                @onclick="OnUnFollowSelectedAuthorAsync">
                    <i class="bi bi-star-fill"></i>
                </button>
            }

        </Content>
    </CustomModal>
}